<!DOCTYPE html>
<html>
    <head>
        <!--Title, icon and bootstrap link-->
        <title>Cart</title>
        <link rel="icon" type="image/x-icon" href="icon.png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="calclation.js"></script>
        <style>
            /*Document level style sheet*/
            .navbar-nav  {
                gap: 30px;
                font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            }

            body{
                font-family: 'Nunito', sans-serif;
                background: rgb(203,131,100);
                background: linear-gradient(0deg, rgba(203,131,100,1) 0%, rgba(238,196,154,1) 100%);
            }

            th pre{
                font-size: 28px;
            }

            .text{
                width: 180px;
            }
            
        </style>
    </head>

    <body>
        <!--Navbar-->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark rounded-top">
            <div>
                <ul class="navbar-nav">

                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">
                            <img style="width: 30px; height: 30px;" src="icon.png"> </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="display.html">Display</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="cart.html">
                            <img src="cartActive.png" width="25px" height="24px">
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="JoinUs.html">Join us</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="contactUs.html">Contact us</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="aboutUs.html">About us</a>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Display the book added in the cart with the price -->
<div class="tableItem">
    <div class="row"></div>
    <br>
    <table style="text-align: center;">
        <tr style="margin-top: 100px;">
            <th style="font-size: 50px;"> Cart: </th>
        </tr>
        <tr style="margin-top: 50px;">
            <th style="font-size: 30px; text-align: right;">
                <pre> Your items: </pre>
            </th>
        </tr>
        <tr>
            <td></td>
            <td>
                <div class="row">
                    <div class="col-10" style="margin-top: 20px;"><img src="phantom.jpg" style="width: 300px; height: 400px;"></div>
                </div>
                <div class="row">
                    <div class="col-12" style="margin-top: 10px; font-size: 25px;"><strong>رواية الشبح </strong></div>
                </div>
                <div class="row">
                    <div class="col-12" style="color: rgb(135, 12, 12); margin-top: 10px; margin-bottom: 40px; font-size: 18px; font-weight: bold;">0.500 OR</div>
                </div>
            </td>
        </tr>
    </table><br>
        <div style="position: relative; display: inline-block; font-size: 30px; margin-left: 10%;">Total price: 
            <input type="text" id="displayTotalPrice" readonly style="text-align: center; width: 150px; font-size: 25px; position: absolute; left: 160px;">
            <div class="btn btn-outline-light" onclick="window.location.href='calculation.html'" style="position: absolute; left: 330px; top: 0; font-size: 23px;">Payment</div>
        </div>
</div><br><br><br>

<!-- Input element for displaying total price -->
<!-- Display the total price on cart.html -->

<!--------------------------------------------------------------------------------------------------------------------------------------->

<div class="container rounded" style="font-size: 22px; border-style: dashed; border-color: rgba(0,0,0,0.65); border-width: 5px; background-color: rgba(128, 73, 45, 0.4); color: rgb(255, 255, 255);">
<br> 
<h2 style="text-align: center; font-weight: bold;">Novels <img src="headicon.png" height="60px" width="60px"> Table</h2>
<br>
    <!-- Books Table -->
    <table id="booksTable" class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody></tbody> <!-- empty table -->
</table>


<!-------------------------------------------------------------------------------------------------------------->

<!-- Form to add a book -->
<form onsubmit="addBook(); return false;">
    <label>Title: </label>
    <input type="text" id="bookTitle" class="text">
    <label>Author: </label>
    <input type="text" id="bookAuthor" class="text">
    <label>Price: </label>
    <input type="text" id="bookPrice" class="text">
    <button type="submit" class="btn btn-outline-light" style="width: 155px; height: 50px; border-radius: 10px; margin-left: 20px; font-weight: bold;">Add Book</button>
</form>
<br>
<p>Do you want to search for a book? </p>
<!-- Search botton to search from the array. -->
<button onclick="searchBooks()" class="btn btn-outline-light" style="margin-bottom: 20px; margin-left: 20px; width: 155px; height: 50px; border-radius: 10px; font-weight: bold;">Search Books</button>

</div>
<br><br><br>



<!-- Footer -->
<footer class="text-center text-white" style="background-color: #14171a">
    <div class="text-center p-3" style="background-color: rgba(117, 117, 117, 0.179)">
        © 2023 Copyright:
        <a class="text-white" href=""> NovelsWorm.com </a>
    </div>
</footer>

<!-- Javascript -->
<script>
    var count = 0;

    function calculatePrice() {
        count += 1;
        var totalPrice = (count * 0.500).toFixed(2);
        document.getElementById("count").value = totalPrice + " OR";
        return totalPrice;
    }

    document.addEventListener("DOMContentLoaded", function () {
        // Function to get URL parameters by name
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Retrieve the total price from URL
        var totalPrice = getParameterByName('total');

        // Display the total price wherever you want on the cart.html page
        if (totalPrice) {
            document.getElementById("displayTotalPrice").value = String(totalPrice) + " OR";
        }
    });
    

    //-----------------------------------------------------------------------------------------------------------------------------------

    // Object type for books
    function Book(title, author, price) {
        this.title = title;
        this.author = author;
        this.price = price;
    }


    // Array for books
    var booksArray = [
        new Book("الشبح", "جو نيسبو", 0.500),
        new Book("أنا يوسف", "أيمن العتوم", 0.500),
        new Book("صاحب الظل الطويل", "جين ويبستر", 0.500),
        new Book("عرين الأسد", "أسامة المسلم", 0.500),
        // Add more books as needed
    ];



    // Function to display books in the table
    function displayBooks() {
        var booksTableBody = document.getElementById("booksTable").getElementsByTagName('tbody')[0];
        
        booksArray.forEach(function (book) {
            var row = booksTableBody.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);

            cell1.innerHTML = book.title;
            cell2.innerHTML = book.author;
            cell3.innerHTML = book.price;
        });
}

    // Function to add a book to the array and update the table
    function addBook() {
        var title = document.getElementById("bookTitle").value;
        var author = document.getElementById("bookAuthor").value;
        var price = parseFloat(document.getElementById("bookPrice").value);

        var newBook = new Book(title, author, price);
        booksArray.push(newBook);

        // Clear input fields
        document.getElementById("bookTitle").value = "";
        document.getElementById("bookAuthor").value = "";
        document.getElementById("bookPrice").value = "";

        // Refresh the books table
        refreshBooksTable();
    }

    function refreshBooksTable() {
        var booksTableBody = document.getElementById("booksTable").getElementsByTagName('tbody')[0];
        booksTableBody.innerHTML = ""; // Clear existing rows
        displayBooks(); // Redraw the table with updated data
    }


    // Function to search book by title
    function searchBooks() {
        var searchTerm = prompt("Enter book title to search:");
        
        var searchResults = booksArray.filter(function (book) {
            return book.title.toLowerCase().includes(searchTerm.toLowerCase());
        });

        displaySearchResults(searchResults, "booksTable");
    }

    // Function to display search results in the table
    function displaySearchResults(results, tableName) {
        var tableBody = document.getElementById(tableName).getElementsByTagName('tbody')[0];
        tableBody.innerHTML = ""; // Clear existing rows

        results.forEach(function (result) {
            var row = tableBody.insertRow();
            for (var key in result) {
                var cell = row.insertCell();
                cell.innerHTML = result[key];
            }
        });
    }
    
        </script>


        
    </body>
</html>
